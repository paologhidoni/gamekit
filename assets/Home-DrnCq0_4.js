import{c as d,R as u,j as e,L as x,r as t,a as f,E as p}from"./index-CCpQ2MJ3.js";import{G as g,B as h,u as j,f as y}from"./BgImage-BV06wd3h.js";const b=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],N=d("search",b);function w({game:r}){return e.jsx("ul",{className:"flex flex-wrap gap-1 mb-2 absolute bottom-2 left-2 z-50 rounded-2xl p-1",children:r.genres?.length>0&&r.genres.map((s,a)=>e.jsx("li",{className:"text-sm py-1.5 px-3 bg-(--color-bg-primary) opacity-85 rounded-2xl border-2 border-(--color-text-tertiary)",children:s.name},`${r.name}-genre-${a}`))})}const v=u.memo(w);function i({platform:r}){return e.jsx("span",{children:r.platform.name})}function R({game:r}){return e.jsx("ul",{className:"flex text-xs gap-1 items-center flex-wrap font-bold",children:r.platforms?.length>0&&r.platforms.map((s,a)=>a!==0?e.jsxs("li",{className:"flex gap-1",children:[e.jsx("span",{className:"text-(--color-accent-primary)",children:"â€¢"}),e.jsx(i,{platform:s})]},s.platform.name):e.jsx("li",{children:e.jsx(i,{platform:s})},s.platform.name))})}const B=u.memo(R);function k({game:r,priority:s=!1}){return e.jsxs(x,{to:`/game/${r.id}`,className:"flex flex-col gap-4 p-4 bg-(--color-bg-secondary) rounded-2xl group border-y-2 border-y-(--color-accent-primary) hover:border-y-(--color-accent-secondary) transition-all transition-100 hover:scale-105",children:[e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-center gap-2",children:[e.jsx("h2",{className:"font-gonadaltes tracking-wider uppercase text-lg text-(--color-text-tertiary) font-bold mb-1 wrap-break-words",children:r.name}),e.jsx(g,{rating:r.rating})]}),e.jsx(B,{game:r})]}),e.jsxs("div",{className:"relative w-full h-64",children:[e.jsx(h,{gameName:r.name,gameBgImage:r.background_image,priority:s}),e.jsx(v,{game:r})]})]})}function C(r,s=500){const a=t.useRef(null),n=t.useRef(r);t.useEffect(()=>{n.current=r},[r]);const l=t.useCallback((...o)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{n.current(...o)},s)},[s]);return t.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),l}function E({onSearch:r}){const s=t.useRef(null),a=t.useCallback(()=>{r(s.current?.value??"")},[r]),n=C(a);return e.jsxs("div",{className:"rounded-full w-full transition duration-300 relative focus:border-y-(--color-accent-primary)",style:{backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)"},children:[e.jsx(N,{className:"absolute left-2 top-1/2 -translate-y-1/2"}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"search-game-input",className:"sr-only",children:"Search for a game"}),e.jsx("input",{ref:s,id:"search-game-input",onChange:n,type:"text",className:"py-2 pl-10 pr-6 w-full rounded-full outline-none"})]})]})}const G="/assets/no-games-COKJArUt.webp";function I(){const[r,s]=t.useState(""),{data:a,isPending:n,isError:l,error:o}=j({queryKey:["games",{searchTerm:r}],queryFn:({signal:c})=>y({signal:c,query:{searchTerm:r}}),staleTime:5e3});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"m-auto md:max-w-2/3 lg:max-w-1/2 mb-8",children:e.jsx(E,{onSearch:s})}),n&&e.jsx(f,{}),l&&e.jsx(p,{errorMessage:o.message}),!a||a.length===0&&e.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold text-center",children:["No games found ",e.jsx("br",{}),"Search again"]}),e.jsx("img",{src:G,alt:"No games found",className:"w-50"})]}),e.jsx("ul",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4",children:a&&a.map((c,m)=>e.jsx("li",{children:e.jsx(k,{game:c,priority:m<4})},c.id))})]})}export{I as default};
