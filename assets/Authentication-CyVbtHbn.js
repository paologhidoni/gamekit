import{R as w,j as e,r as c,v as S,w as N,x as C}from"./index-CCpQ2MJ3.js";function E({text:r,type:l="button",handleOnClick:a,variant:i="variant-1",extraClasses:n,disabled:d=!1}){const s={"variant-1":`py-3 px-5 rounded-2xl w-fit font-bold border-2 border-(--color-accent-primary) bg-(--color-accent-primary) cursor-pointer transition-colors duration-100 text-(--color-text-secondary) hover:bg-(--color-accent-secondary) hover:border-(--color-accent-secondary) ${n}`,"variant-2":`py-3 px-5 rounded-2xl w-fit font-bold border-2 border-(--color-text-secondary) bg-transparent cursor-pointer transition-colors duration-100 text-(--color-text-secondary) hover:bg-(--color-accent-secondary) hover:border-(--color-accent-secondary) ${n}`}[i];return e.jsx("button",{type:l,onClick:a,className:s,disabled:d,children:r})}const g=w.memo(E);function P(){const[r,l]=c.useState(""),[a,i]=c.useState(""),[n,d]=c.useState(!1),[x,s]=c.useState(null),[b,m]=c.useState(!1),[f]=S(),p=N(),t=f.get("mode")==="login",{signIn:h,signUp:y}=C(),v=async o=>{o.preventDefault(),d(!0),s(null),m(!1);try{const{error:u}=t?await h({email:r,password:a}):await y({email:r,password:a,options:{emailRedirectTo:window.location.origin}});if(u)throw u;t?p("/"):m(!0)}catch(u){s(u.message||"An unexpected error occurred.")}finally{l(""),i(""),d(!1)}},j=()=>{p(`?mode=${t?"signup":"login"}`,{replace:!0}),s(null),m(!1)};return e.jsxs("section",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-center",children:t?"Login":"Create a new user"}),b&&e.jsx("p",{className:"text-center font-bold text-green-500 mb-4",children:"Success! Please check your email to confirm your account."}),e.jsxs("form",{onSubmit:v,className:"flex flex-col gap-5 m-auto sm:max-w-1/2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:r,onChange:o=>l(o.target.value),className:"py-2 px-4 bg-(--color-bg-secondary) text-(--color-text-primary) rounded-2xl outline-none"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:a,onChange:o=>i(o.target.value),className:"py-2 px-4 bg-(--color-bg-secondary) text-(--color-text-primary) rounded-2xl outline-none"})]}),x&&e.jsx("p",{className:"text-center font-bold text-red-500 mt-2",children:x}),e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsx(g,{type:"button",text:t?"Create account":"Login",handleOnClick:j,variant:"variant-2"}),e.jsx(g,{type:"submit",text:n?"Submitting...":t?"Login":"Create user",disabled:n})]})]})]})}export{P as default};
